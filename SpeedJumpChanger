local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer

local function modifyPlayerAttributes()
    local function onCharacterAdded(character)
        local humanoid = character:WaitForChild("Humanoid")
        local rootPart = character:WaitForChild("HumanoidRootPart")

        local originalWalkSpeed = humanoid.WalkSpeed
        local originalJumpPower = humanoid.JumpPower

        local function applyCustomAttributes()
            if _G.PlayerSpeedEnabled then
                humanoid.WalkSpeed = _G.PlayerSpeed
                humanoid.JumpPower = _G.PlayerJumpHeight
            else
                humanoid.WalkSpeed = originalWalkSpeed
                humanoid.JumpPower = originalJumpPower
            end
        end

        -- Listen for changes to _G.PlayerSpeedEnabled
        RunService.Heartbeat:Connect(function()
            applyCustomAttributes()
        end)
    end

    player.CharacterAdded:Connect(onCharacterAdded)

    -- If the character already exists, apply changes immediately
    if player.Character then
        onCharacterAdded(player.Character)
    end
end

modifyPlayerAttributes()

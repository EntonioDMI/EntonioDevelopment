-- Получаем игрока
local player = game.Players.LocalPlayer

-- Функция для симуляции увеличения скорости
local function simulateSpeedIncrease(character)
    -- Ждем, пока Humanoid не станет доступным
    local humanoid = character:WaitForChild("Humanoid")
    local rootPart = character:WaitForChild("HumanoidRootPart")

    -- Подключаем функцию к RenderStepped для постоянного изменения позиции
    local connection
    connection = game:GetService("RunService").RenderStepped:Connect(function()
        if _G.MyScriptPlayerChangeModificatorEnabled and humanoid and rootPart then
            -- Вычисляем вектор движения
            local moveDirection = humanoid.MoveDirection * (_G.MyScriptPlayerSpeed - humanoid.WalkSpeed) * game:GetService("RunService").RenderStepped:Wait()
            rootPart.CFrame = rootPart.CFrame + moveDirection
        end
    end)

    -- Подключаем функцию для отслеживания изменений в реальном времени
    game:GetService("RunService").RenderStepped:Connect(function()
        if not _G.MyScriptPlayerChangeModificatorEnabled and connection then
            -- Отключаем подключение, если модификация выключена
            connection:Disconnect()
            connection = nil
            print("Модификация отключена")
        elseif _G.MyScriptPlayerChangeModificatorEnabled and not connection then
            -- Переподключаем, если модификация снова включена
            connection = game:GetService("RunService").RenderStepped:Connect(function()
                if _G.MyScriptPlayerChangeModificatorEnabled and humanoid and rootPart then
                    local moveDirection = humanoid.MoveDirection * (_G.MyScriptPlayerSpeed - humanoid.WalkSpeed) * game:GetService("RunService").RenderStepped:Wait()
                    rootPart.CFrame = rootPart.CFrame + moveDirection
                end
            end)
            print("Модификация включена")
        end
    end)

    -- Выводим сообщение в консоль
    print("Симуляция увеличения скорости игрока до: " .. _G.MyScriptPlayerSpeed)
end

-- Подключаем функцию к событию CharacterAdded
player.CharacterAdded:Connect(simulateSpeedIncrease)

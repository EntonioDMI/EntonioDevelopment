local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer

local function modifyPlayerAttributes()
    local humanoid
    local originalWalkSpeed
    local originalJumpPower

    local function updateAttributes()
        if humanoid then
            if _G.MyScriptPlayerSpeedEnabled then
                if humanoid.WalkSpeed ~= _G.MyScriptPlayerSpeed then
                    humanoid.WalkSpeed = _G.MyScriptPlayerSpeed
                end
                if humanoid.JumpPower ~= _G.MyScriptPlayerJumpHeight then
                    humanoid.JumpPower = _G.MyScriptPlayerJumpHeight
                end
            else
                if humanoid.WalkSpeed ~= originalWalkSpeed then
                    humanoid.WalkSpeed = originalWalkSpeed
                end
                if humanoid.JumpPower ~= originalJumpPower then
                    humanoid.JumpPower = originalJumpPower
                end
            end
        end
    end

    local function onCharacterAdded(character)
        humanoid = character:WaitForChild("Humanoid")
        originalWalkSpeed = humanoid.WalkSpeed
        originalJumpPower = humanoid.JumpPower

        -- Следим за изменениями переменных и обновляем атрибуты
        RunService.Heartbeat:Connect(updateAttributes)
    end

    player.CharacterAdded:Connect(onCharacterAdded)

    -- Если персонаж уже существует, применяем изменения сразу
    if player.Character then
        onCharacterAdded(player.Character)
    end
end

modifyPlayerAttributes()

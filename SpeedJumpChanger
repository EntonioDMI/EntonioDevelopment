local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer

local function modifyPlayerAttributes()
    local function onCharacterAdded(character)
        local humanoid = character:WaitForChild("Humanoid")
        local rootPart = character:WaitForChild("HumanoidRootPart")

        local originalWalkSpeed = humanoid.WalkSpeed
        local originalJumpPower = humanoid.JumpPower

        local function applyChanges()
            while true do
                if _G.PlayerSpeedEnabled then
                    if humanoid.WalkSpeed ~= _G.PlayerSpeed then
                        humanoid.WalkSpeed = _G.PlayerSpeed
                    end
                    if humanoid.JumpPower ~= _G.PlayerJumpHeight then
                        humanoid.JumpPower = _G.PlayerJumpHeight
                    end
                else
                    if humanoid.WalkSpeed ~= originalWalkSpeed then
                        humanoid.WalkSpeed = originalWalkSpeed
                    end
                    if humanoid.JumpPower ~= originalJumpPower then
                        humanoid.JumpPower = originalJumpPower
                    end
                end
                RunService.Heartbeat:Wait()
            end
        end

        coroutine.wrap(applyChanges)()
    end

    player.CharacterAdded:Connect(onCharacterAdded)

    -- If the character already exists, apply changes immediately
    if player.Character then
        onCharacterAdded(player.Character)
    end
end

modifyPlayerAttributes()

local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer

local connection

local function updateAttributes(humanoid, originalWalkSpeed, originalJumpPower)
    if _G.MyScriptPlayerSpeedEnabled then
        -- Применяем только если включено
        humanoid.WalkSpeed = _G.MyScriptPlayerSpeed
        humanoid.JumpPower = _G.MyScriptPlayerJumpHeight
    elseif connection then
        -- Отключаем обновление, если скрипт неактивен
        connection:Disconnect()
        connection = nil
    end
end

local function onCharacterAdded(character)
    local humanoid = character:WaitForChild("Humanoid")
    local originalWalkSpeed = humanoid.WalkSpeed
    local originalJumpPower = humanoid.JumpPower

    connection = RunService.RenderStepped:Connect(function()
        updateAttributes(humanoid, originalWalkSpeed, originalJumpPower)
    end)
end

player.CharacterAdded:Connect(onCharacterAdded)

if player.Character then
    onCharacterAdded(player.Character)
end

local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer

local function modifyPlayerAttributes()
    local function onCharacterAdded(character)
        local humanoid = character:WaitForChild("Humanoid")
        local rootPart = character:WaitForChild("HumanoidRootPart")

        local originalWalkSpeed = humanoid.WalkSpeed
        local originalJumpPower = humanoid.JumpPower

        local function applyChanges()
            while true do
                if _G.PlayerSpeedEnabled then
                    -- Apply custom speed and jump only if enabled
                    humanoid.WalkSpeed = _G.PlayerSpeed
                    humanoid.JumpPower = _G.PlayerJumpHeight
                else
                    -- Restore original values and exit loop
                    humanoid.WalkSpeed = originalWalkSpeed
                    humanoid.JumpPower = originalJumpPower
                    break
                end
                RunService.Heartbeat:Wait()
            end
        end

        coroutine.wrap(applyChanges)()
    end

    player.CharacterAdded:Connect(onCharacterAdded)

    -- If the character already exists, apply changes immediately
    if player.Character then
        onCharacterAdded(player.Character)
    end
end

modifyPlayerAttributes()
